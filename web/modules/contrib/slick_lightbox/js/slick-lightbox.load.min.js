(function(g,b,c,f){var d=false;var e="slick-lightbox-gallery--on";function a(p){var o;var q=g("> .slick__slider",p);var s=q.length?q:g(p);var t=c.slickLightbox.lightbox||{};var h=c.slickLightbox.slick||{};t.itemSelector=t.itemSelector+",[data-slick-lightbox-trigger]";var j=t.itemSelector;var k=g(j,p);function i(w){var v=0;if(d){k=s.find(j);d=false}k.each(function(x,y){if(y===w){v=x;return false}});return v}function n(x){var z;var v;var y;var C;var w;var B;var D=g(".slick-lightbox-slick",x);var F=D.children();var A;function I(){var K=D.find(".is-playing");w=D.find("video");D.removeClass("is-paused");if(K.length){K.removeClass("is-playing").find(".media__icon--close").click()}if(w.length){w[0].pause()}}function J(){D.addClass("is-paused").slick("slickPause")}function G(){var L=g(this);var K=L.width();var M=L.closest(".media-wrapper--inline");var O=M.next(".slick-lightbox-slick-caption");var N=M.parent().height();if(O.length){N=N-(O.height()+parseInt(O.css("margin-top").replace("px","")))}L.css("max-height",N);M.css({width:K})}function H(N,O){var M;v=g(O);B=g(F[N]);C=g(".media--player",B);w=g("video",B);z=v.data("media");g("img",B).attr("loading","lazy");if(z){B.addClass("slick-slide--"+z.type);var K=z.html||v.data("bRich")||false;if(z.type==="rich"&&K&&!w.length){try{M="html" in z?K:JSON.parse(K);y=b.theme("slickLightbox",{html:M,media:z});B.find(".slick-lightbox-slick-img").replaceWith(y);var L=B.find("img");if(L.length){L.addClass("slick-lightbox-slick-img");if(B.find(".slick-lightbox-slick-caption").length){window.setTimeout(function(){L.each(function(){if(this.complete){G.call(this)}else{g(this).one("load",G)}})},10)}}}catch(P){}b.attachBehaviors(w[0])}else{if(v.data("boxUrl")&&!C.length){y=b.theme("slickLightboxMedia",{el:v});B.find(".slick-lightbox-slick-img").replaceWith(y);b.attachBehaviors(C[0])}}}}if(!D.hasClass("slick-initialized")){k.each(H);A=D.slick(h);D.on("afterChange.slbox",I);D.on("click.slbox",".media__icon--close",I);D.on("click.slbox",".media__icon--play",J);if(F.length===1){var E=D.slick("getSlick");D.addClass("slight-lightbox-slick--unslick");E.$slideTrack.css({left:"",transform:""})}}return A}var u={closeOnBackdropClick:false,itemSelector:j,caption:function(w,v){var x=g(w).next(".litebox-caption");return x.length?x.html():""},src:function(w){var v=g(w);return v.data("boxUrl")||v.attr("href")},slick:n};var r={"show.slickLightbox":function(){g(".slick-slide--video .slick-lightbox-slick-item-inner").removeAttr("style");g(s[0].slickLightbox.$modalElement).on("click.slbox",".slick-lightbox-slick-item",function(v){if(v.target===this){g(".slick-lightbox-close").click()}})}};var l=t?g.extend({},u,t):u;function m(){var A=g(this);var B=0;var z=false;var y=t.itemContainers;if(y){var v=y.length;for(var x=0;x<v;x++){var w=A.closest(y[x]);if(w.length){B=w.index();z=true;break}}}if(!z){B=i(A[0])}o=s[0].slickLightbox;if(o&&o.slick){o.slick.slick("slickGoTo",B,true)}}s.slickLightbox(l).on(r);s.off("click.slbox").on("click.slbox",j,m);g(p).addClass(e)}b.theme.slickLightbox=function(i){var j=i.media;var h;h='<div class="media-wrapper media-wrapper--inline" style="width:'+j.width+'px">';h+=i.html;h+="</div>";return h};b.theme.slickLightboxMedia=function(k){var i=k.el;var o=i.data("media");var n=g("img",i).length?g("img",i).attr("alt"):"";var m=((o.height/o.width)*100).toFixed(2);var h=i.data("boxUrl");var l=i.data("oembedUrl")?i.data("oembedUrl"):i.attr("href");var j;j='<div class="media-wrapper media-wrapper--inline" style="width:'+o.width+'px">';j+='<div class="media media--switch media--player media--ratio media--ratio--fluid" style="padding-bottom: '+m+'%">';j+='<img src="'+h+'" class="media__image media__element" alt="'+b.t(n)+'"/>';j+='<span class="media__icon media__icon--close"></span>';j+='<span class="media__icon media__icon--play" data-url="'+l+'"></span>';j+="</div></div>";return j};b.behaviors.slickLightbox={attach:function(k){k=k instanceof HTMLDocument?k:document;var h="[data-slick-lightbox-gallery]:not(."+e+"), .slick-lightbox-gallery:not(."+e+")";var i=k.querySelector(h);var j=i===null?[]:k.querySelectorAll(h);if(j.length){f.once(f.forEach(j,a,k))}},detach:function(i,j,h){d=h==="unload"}}})(jQuery,Drupal,drupalSettings,dBlazy);
